<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      <h1>Webtechnology comparison</h1>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row>
    <ion-col size-lg="4" offset-lg="1" size="12">
      <ion-card>
        <ion-card-content>
          <h2>Pure Javascript</h2>
          <a href="https://github.com/TobiasFP/tobiaswaagefeldballe.com/blob/main/src/app/pages/speedtest/speedtest.page.ts"> See the code </a> <br />
          <p>
            This benchmark tests how fast your browsers javascript engine can
            process loops in pure javascript.
          </p>
          <ion-button id="gopherJsButton" (click)="runJavascript()">Test</ion-button>
          {{ timePassedJs }} ms
        </ion-card-content>
      </ion-card>
    </ion-col>
    <ion-col size-lg="4" offset-lg="2" size="12">
      <ion-card>
        <ion-card-content>
          <h2>Wasm compiled from GoLang</h2>
          <a href="https://github.com/TobiasFP/TobiasWaageFeldballe_speedtest_go"> See the code </a> <br />
          <p>
            This benchmark tests how fast your browsers WebAssembly engine can
            process loops.
          </p>
          <ion-button (click)="runWasm()">Test</ion-button>
          {{ timePassedWasm }} ms
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size-lg="4" offset-lg="1" size="12">
      <ion-card>
        <ion-card-content>
          <h2>Golang on a backend server (A Raspberry pi 3/1gb ram)</h2>
          <a href="https://github.com/TobiasFP/TobiasWaageFeldballe_speedtest_go"> See the code </a> <br />
          <p>
            This benchmark tests how the same code is executed on a single core of a
            Raspberry Pi 3, run on the backend server in pure GoLang.
          </p>
          <ion-button (click)="runGoLang()">Test</ion-button>
          {{ timePassedGo }} ms
        </ion-card-content>
      </ion-card>
    </ion-col>
    <ion-col size-lg="4" offset-lg="2" size="12">
      <ion-card>
        <ion-card-content>
          <h2>Fortran on a backend server (A Raspberry pi 3/1gb ram)</h2>
          <a href="https://github.com/TobiasFP/Speedtest_Fortran"> See the code </a> <br />
          <p>
            This benchmark tests how an implementation of the GoLang code rewritten
            in Fortran is executed on a single core of a Raspberry Pi 3, run on the
            backend server.
          </p>
          <ion-button (click)="runFortran()">Test</ion-button>
          {{ timePassedFortran }} ms
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col>
      <ion-card>
        <ion-card-content>
          <h2>Conclusions</h2>
          <p>
            On my computer, with Firefox I have run all of these tests, and the conclusions are quite clear:
            GoLang and Fortran on a server is by far much quicker than running in the frontend. But the important part
            is to remember that these tests only test loops, which have been optimized heavily both by Mozilla and by
            Google's Javascript engines.
            A bit surprisingly, we can conclude that WASM is the least performant of the bunch of tests (Especially
            since your computer should be able to outperform a Raspberry Pi). The reason as to why WASM is performing
            so
            poorly compared to Javascript is probably in the fact that Javascript loops have been heavily optimised.
            In regards to comparing WASM with Golang and Fortran, I am surprised, since WASM is supposed to be a very
            optimised, byte-code intermediate engine, optimised a lot like Java, where we should only see little
            overhead
            when it comes to Loop benchmarking. The reason behind this may be the way GoLang is transpiled to WASM
            byte-code.
            It comes as no surprise that GoLang and Fortran are comparable in speed, as they both are compiled
            languages.

          </p>
          <p>
            It comes as a huge surprise to me that when running the Javascript and Wasm tests in Chrome, the browser
            simply outperforms both Firefox and Safari. It is a bit understandable with all the efforts that Google
            has
            made
            in making their Javascript V8 engine very optimised.
          </p>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-content>

<script src="assets/webcomponents/speedtest/speedtest.js"></script>